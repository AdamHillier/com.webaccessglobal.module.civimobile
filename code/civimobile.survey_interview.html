<?php require_once 'civimobile.header.php'; ?>

<div data-role="header" id="jqm-eventsheader">
  <h3>Interview Respondant</h3>
  <a href="#crm-jqm-home" data-ajax="true" id="home-main" data-transition="slideup" data-direction="reverse" data-role="button" data-icon="home" data-iconpos="notext" class="ui-btn-left jqm-home">Home</a>
</div> 

<div data-role="content" id="survey-interview-content">
</div>
<?php require_once 'civimobile.footer.php'; ?> 

<script>
  $(document).bind('pageinit', function() {
    surveyRespondantSearch();
  });

  function surveyRespondantSearch() {
    var surveyId = getURLParameter('sid');
    if ( isNaN(surveyId) ) {
      return;
    }

    var resId = getURLParameter('resid');
    if ( isNaN(resId) ) {
      return;
    }

    var rId = getURLParameter('rid');
    if ( isNaN(rId) ) {
      return;
    }

    var contactId = getURLParameter('cid');
    if ( isNaN(cid) ) {
      return;
    }

    $.mobile.showPageLoadingMsg( 'Loading' );
    // get the profile related to survey
    var profileId;
    cj().crmAPI ('UFJoin','get',{ 'sequential' :'1', 'module' :'CiviCampaign', 'entity_table' :'civicrm_survey', 'enity_id' : surveyId}
    ,{ success:function (data){    
        profileId = data.values.uf_group_id;
      }
    });

    console.log('profile id' + profileId);

    // get the result for the survey
    $().crmAPI ('OptionValue','get',
    {'version' :'3', 'debug': 1, 'option_group_id': resId,
      },
    { 
      ajaxURL: crmajaxURL,
      success:function (data){
        $.mobile.hidePageLoadingMsg( );
      }
    });

    // save action for contact values

    // save action to save the result for the activity

  }
</script>

